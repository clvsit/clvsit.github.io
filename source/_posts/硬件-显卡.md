---
title: 硬件-显卡
date: 2024-04-09 15:50:00
tags:
---

# 基础概念

## Pinned Memory
页锁内存（Pinned Memory 或 Page-locked Memory）是指在计算机系统中，物理内存中的某些页面被锁定（或固定），以防止操作系统将这些页面交换到磁盘上。这种技术在高性能计算和 GPU 编程中尤为重要，尤其是在使用 CUDA 编程时。

### 页锁内存的主要特点和优势  

1. **防止交换**：页锁内存不会被操作系统的虚拟内存管理系统交换到磁盘上。这意味着数据始终驻留在物理内存中，避免了磁盘I/O的开销。  
2. **高效的数据传输**：在 GPU 编程中（如使用 CUDA），使用页锁内存可以显著提高 CPU 和 GPU 之间的数据传输速度。GPU 设备可以直接访问页锁内存，而不需要首先将数据复制到临时缓冲区。  
3. **低延迟**：由于数据不会被交换到磁盘上，访问页锁内存的数据会有更低的延迟。  

### 页锁内存的使用场景  

- **GPU 编程**：在 CUDA 编程中，页锁内存通常用于提高主机（CPU）和设备（GPU）之间的数据传输效率。可以使用 CUDA 提供的 API 函数 `cudaHostAlloc` 来分配页锁内存。  
- **实时系统**：在需要低延迟和高确定性的实时系统中，页锁内存可以确保关键数据始终在内存中可用。  

### 页锁内存的缺点  

- **资源限制**：由于页锁内存不能交换到磁盘上，它会一直占用物理内存。过多使用页锁内存可能会导致系统物理内存不足，从而影响系统性能和稳定性。  
- **管理复杂性**：需要程序员手动管理页锁内存的分配和释放，增加了编程的复杂性。

# Q & A

#### Q1：片上缓存（on-chip cache）和 SRAM 是同一个东西吗？

片上缓存（on-chip cache）和静态随机存取存储器（SRAM，Static Random-Access Memory）虽然在某些方面相关，但它们并不是同一个东西。下面是对它们的详细解释：  

**片上缓存（On-chip Cache）**：

- **作用**：片上缓存是一种用于存储临时数据的高速存储器，通常集成在处理器芯片上。它的主要目的是减少访问主存（DRAM）的延迟，从而提高计算机系统的整体性能。  
- **层次结构**：片上缓存通常分为多个层次，如L1缓存、L2缓存、L3缓存等。L1缓存通常是最快的，但容量最小，而L3缓存容量较大，但速度较慢。  
- **功能**：它主要用于存储最近使用或即将使用的数据和指令，以便处理器可以快速访问这些数据，而不必每次都从主存读取。  

**静态随机存取存储器（SRAM）**：

- **类型**：SRAM是一种用于存储数据的存储器技术。它与DRAM（动态随机存取存储器）不同，因为它不需要周期性地刷新数据。  
- **特性**：SRAM具有高速度和低延迟的特点，但成本较高，功耗也较高。由于这些特性，SRAM通常用于需要高速度但容量不需要特别大的应用场景，比如缓存。  
- **应用**：SRAM广泛用于片上缓存、寄存器文件、嵌入式系统和其他需要快速存储和读取的小容量存储区域。  

**SRAM作为片上缓存的实现技术**：片上缓存是指存储器在计算机系统中的具体用途和位置，其存储器单元通常是由SRAM实现的（SRAM是实现这种存储功能的物理技术）。也就是说，L1、L2、L3缓存等片上缓存具体使用的存储技术通常是SRAM。

# 未读资料
- [GPU内存(显存)的理解与基本使用 - kaiyuan的文章 - 知乎](https://zhuanlan.zhihu.com/p/462191421)
- [理解GPU的底层架构 - Clarence的文章 - 知乎](https://zhuanlan.zhihu.com/p/598173226)

# 参考资料
- https://github.com/adam-maj/tiny-gpu
